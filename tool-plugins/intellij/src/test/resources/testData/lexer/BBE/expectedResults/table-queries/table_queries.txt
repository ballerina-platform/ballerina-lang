import ('import')
WHITE_SPACE (' ')
identifier ('ballerina')
/ ('/')
identifier ('io')
; (';')
WHITE_SPACE ('\n\n')
LINE_COMMENT ('// This type represents a person.')
WHITE_SPACE ('\n')
type ('type')
WHITE_SPACE (' ')
identifier ('Person')
WHITE_SPACE (' ')
record ('record')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n    ')
int ('int')
WHITE_SPACE (' ')
identifier ('id')
; (';')
WHITE_SPACE ('\n    ')
int ('int')
WHITE_SPACE (' ')
identifier ('age')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
- ('-')
DECIMAL_INTEGER_LITERAL ('1')
; (';')
WHITE_SPACE ('\n    ')
float ('float')
WHITE_SPACE (' ')
identifier ('salary')
; (';')
WHITE_SPACE ('\n    ')
string ('string')
WHITE_SPACE (' ')
identifier ('name')
; (';')
WHITE_SPACE ('\n    ')
boolean ('boolean')
WHITE_SPACE (' ')
identifier ('married')
; (';')
WHITE_SPACE ('\n')
} ('}')
; (';')
WHITE_SPACE ('\n\n')
LINE_COMMENT ('// This type represents an order.')
WHITE_SPACE ('\n')
type ('type')
WHITE_SPACE (' ')
identifier ('Order')
WHITE_SPACE (' ')
record ('record')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n    ')
int ('int')
WHITE_SPACE (' ')
identifier ('personId')
; (';')
WHITE_SPACE ('\n    ')
int ('int')
WHITE_SPACE (' ')
identifier ('orderId')
; (';')
WHITE_SPACE ('\n    ')
string ('string')
WHITE_SPACE (' ')
identifier ('items')
; (';')
WHITE_SPACE ('\n    ')
float ('float')
WHITE_SPACE (' ')
identifier ('amount')
; (';')
WHITE_SPACE ('\n')
} ('}')
; (';')
WHITE_SPACE ('\n\n')
LINE_COMMENT ('// This type represents the summed up order details.')
WHITE_SPACE ('\n')
type ('type')
WHITE_SPACE (' ')
identifier ('SummedOrder')
WHITE_SPACE (' ')
record ('record')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n    ')
int ('int')
WHITE_SPACE (' ')
identifier ('personId')
; (';')
WHITE_SPACE ('\n    ')
float ('float')
WHITE_SPACE (' ')
identifier ('amount')
; (';')
WHITE_SPACE ('\n')
} ('}')
; (';')
WHITE_SPACE ('\n\n')
LINE_COMMENT ('// This type represents order details (this is derived by joining the person details')
WHITE_SPACE ('\n')
LINE_COMMENT ('//and the order details).')
WHITE_SPACE ('\n')
type ('type')
WHITE_SPACE (' ')
identifier ('OrderDetails')
WHITE_SPACE (' ')
record ('record')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n    ')
int ('int')
WHITE_SPACE (' ')
identifier ('orderId')
; (';')
WHITE_SPACE ('\n    ')
string ('string')
WHITE_SPACE (' ')
identifier ('personName')
; (';')
WHITE_SPACE ('\n    ')
string ('string')
WHITE_SPACE (' ')
identifier ('items')
; (';')
WHITE_SPACE ('\n    ')
float ('float')
WHITE_SPACE (' ')
identifier ('amount')
; (';')
WHITE_SPACE ('\n')
} ('}')
; (';')
WHITE_SPACE ('\n\n')
LINE_COMMENT ('// This type represents the Person public profile.')
WHITE_SPACE ('\n')
type ('type')
WHITE_SPACE (' ')
identifier ('PersonPublicProfile')
WHITE_SPACE (' ')
record ('record')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n    ')
string ('string')
WHITE_SPACE (' ')
identifier ('knownName')
; (';')
WHITE_SPACE ('\n    ')
int ('int')
WHITE_SPACE (' ')
identifier ('age')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
- ('-')
DECIMAL_INTEGER_LITERAL ('1')
; (';')
WHITE_SPACE ('\n')
} ('}')
; (';')
WHITE_SPACE ('\n\n')
LINE_COMMENT ('// This is the main function.')
WHITE_SPACE ('\n')
PUBLIC ('public')
WHITE_SPACE (' ')
function ('function')
WHITE_SPACE (' ')
identifier ('main')
( ('(')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n    ')
string ('string')
WHITE_SPACE (' ')
identifier ('queryStmt')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('""')
; (';')
WHITE_SPACE ('\n\n    ')
LINE_COMMENT ('// These are a few sample values that represent different `Person` records.')
WHITE_SPACE ('\n    ')
identifier ('Person')
WHITE_SPACE (' ')
identifier ('p1')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE (' ')
identifier ('id')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('1')
, (',')
WHITE_SPACE (' ')
identifier ('age')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('25')
, (',')
WHITE_SPACE (' ')
identifier ('salary')
: (':')
WHITE_SPACE (' ')
DECIMAL_FLOATING_POINT_NUMBER ('1000.50')
, (',')
WHITE_SPACE (' ')
identifier ('name')
: (':')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"jane"')
, (',')
WHITE_SPACE (' ')
identifier ('married')
: (':')
WHITE_SPACE (' ')
BOOLEAN_LITERAL ('true')
WHITE_SPACE (' ')
} ('}')
; (';')
WHITE_SPACE ('\n    ')
identifier ('Person')
WHITE_SPACE (' ')
identifier ('p2')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE (' ')
identifier ('id')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('2')
, (',')
WHITE_SPACE (' ')
identifier ('age')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('26')
, (',')
WHITE_SPACE (' ')
identifier ('salary')
: (':')
WHITE_SPACE (' ')
DECIMAL_FLOATING_POINT_NUMBER ('1050.50')
, (',')
WHITE_SPACE (' ')
identifier ('name')
: (':')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"kane"')
, (',')
WHITE_SPACE (' ')
identifier ('married')
: (':')
WHITE_SPACE (' ')
BOOLEAN_LITERAL ('false')
WHITE_SPACE (' ')
} ('}')
; (';')
WHITE_SPACE ('\n    ')
identifier ('Person')
WHITE_SPACE (' ')
identifier ('p3')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE (' ')
identifier ('id')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('3')
, (',')
WHITE_SPACE (' ')
identifier ('age')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('27')
, (',')
WHITE_SPACE (' ')
identifier ('salary')
: (':')
WHITE_SPACE (' ')
DECIMAL_FLOATING_POINT_NUMBER ('1200.50')
, (',')
WHITE_SPACE (' ')
identifier ('name')
: (':')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"jack"')
, (',')
WHITE_SPACE (' ')
identifier ('married')
: (':')
WHITE_SPACE (' ')
BOOLEAN_LITERAL ('true')
WHITE_SPACE (' ')
} ('}')
; (';')
WHITE_SPACE ('\n    ')
identifier ('Person')
WHITE_SPACE (' ')
identifier ('p4')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE (' ')
identifier ('id')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('4')
, (',')
WHITE_SPACE (' ')
identifier ('age')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('28')
, (',')
WHITE_SPACE (' ')
identifier ('salary')
: (':')
WHITE_SPACE (' ')
DECIMAL_FLOATING_POINT_NUMBER ('1100.50')
, (',')
WHITE_SPACE (' ')
identifier ('name')
: (':')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"alex"')
, (',')
WHITE_SPACE (' ')
identifier ('married')
: (':')
WHITE_SPACE (' ')
BOOLEAN_LITERAL ('false')
WHITE_SPACE (' ')
} ('}')
; (';')
WHITE_SPACE ('\n\n    ')
LINE_COMMENT ('// This is the in-memory table that is constrained by the `Person` type.')
WHITE_SPACE ('\n    ')
table ('table')
< ('<')
identifier ('Person')
> ('>')
WHITE_SPACE (' ')
identifier ('personTable')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
table ('table')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
{ ('{')
WHITE_SPACE (' ')
identifier ('id')
, (',')
WHITE_SPACE (' ')
identifier ('age')
, (',')
WHITE_SPACE (' ')
identifier ('salary')
, (',')
WHITE_SPACE (' ')
identifier ('name')
, (',')
WHITE_SPACE (' ')
identifier ('married')
WHITE_SPACE (' ')
} ('}')
, (',')
WHITE_SPACE ('\n        ')
[ ('[')
identifier ('p1')
, (',')
WHITE_SPACE (' ')
identifier ('p2')
, (',')
WHITE_SPACE (' ')
identifier ('p3')
, (',')
WHITE_SPACE (' ')
identifier ('p4')
] (']')
WHITE_SPACE ('\n    ')
} ('}')
; (';')
WHITE_SPACE ('\n\n    ')
LINE_COMMENT ('// This prints the `Person` table content.')
WHITE_SPACE ('\n    ')
identifier ('printTable')
( ('(')
identifier ('queryStmt')
, (',')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"The personTable:  "')
, (',')
WHITE_SPACE (' ')
identifier ('personTable')
) (')')
; (';')
WHITE_SPACE ('\n\n    ')
LINE_COMMENT ('// These are a few sample values that represent orders made by the people who were')
WHITE_SPACE ('\n    ')
LINE_COMMENT ('// listed above as person records.')
WHITE_SPACE ('\n    ')
identifier ('Order')
WHITE_SPACE (' ')
identifier ('o1')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE ('\n    ')
{ ('{')
WHITE_SPACE (' ')
identifier ('personId')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('1')
, (',')
WHITE_SPACE (' ')
identifier ('orderId')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('1234')
, (',')
WHITE_SPACE (' ')
identifier ('items')
: (':')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"pen, book, eraser"')
, (',')
WHITE_SPACE (' ')
identifier ('amount')
: (':')
WHITE_SPACE (' ')
DECIMAL_FLOATING_POINT_NUMBER ('34.75')
WHITE_SPACE (' ')
} ('}')
; (';')
WHITE_SPACE ('\n    ')
identifier ('Order')
WHITE_SPACE (' ')
identifier ('o2')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE ('\n    ')
{ ('{')
WHITE_SPACE (' ')
identifier ('personId')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('1')
, (',')
WHITE_SPACE (' ')
identifier ('orderId')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('2314')
, (',')
WHITE_SPACE (' ')
identifier ('items')
: (':')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"dhal, rice, carrot"')
, (',')
WHITE_SPACE (' ')
identifier ('amount')
: (':')
WHITE_SPACE (' ')
DECIMAL_FLOATING_POINT_NUMBER ('14.75')
WHITE_SPACE (' ')
} ('}')
; (';')
WHITE_SPACE ('\n    ')
identifier ('Order')
WHITE_SPACE (' ')
identifier ('o3')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE ('\n    ')
{ ('{')
WHITE_SPACE (' ')
identifier ('personId')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('2')
, (',')
WHITE_SPACE (' ')
identifier ('orderId')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('5643')
, (',')
WHITE_SPACE (' ')
identifier ('items')
: (':')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"Macbook Pro"')
, (',')
WHITE_SPACE (' ')
identifier ('amount')
: (':')
WHITE_SPACE (' ')
DECIMAL_FLOATING_POINT_NUMBER ('2334.75')
WHITE_SPACE (' ')
} ('}')
; (';')
WHITE_SPACE ('\n    ')
identifier ('Order')
WHITE_SPACE (' ')
identifier ('o4')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE (' ')
identifier ('personId')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('3')
, (',')
WHITE_SPACE (' ')
identifier ('orderId')
: (':')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('8765')
, (',')
WHITE_SPACE (' ')
identifier ('items')
: (':')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"Tshirt"')
, (',')
WHITE_SPACE (' ')
identifier ('amount')
: (':')
WHITE_SPACE (' ')
DECIMAL_FLOATING_POINT_NUMBER ('20.75')
WHITE_SPACE (' ')
} ('}')
; (';')
WHITE_SPACE ('\n\n    ')
LINE_COMMENT ('// This is the in-memory table that is constrained by the `Order` type.')
WHITE_SPACE ('\n    ')
table ('table')
< ('<')
identifier ('Order')
> ('>')
WHITE_SPACE (' ')
identifier ('orderTable')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
table ('table')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
{ ('{')
WHITE_SPACE (' ')
identifier ('personId')
, (',')
WHITE_SPACE (' ')
identifier ('orderId')
, (',')
WHITE_SPACE (' ')
identifier ('items')
, (',')
WHITE_SPACE (' ')
identifier ('amount')
WHITE_SPACE (' ')
} ('}')
, (',')
WHITE_SPACE ('\n        ')
[ ('[')
identifier ('o1')
, (',')
WHITE_SPACE (' ')
identifier ('o2')
, (',')
WHITE_SPACE (' ')
identifier ('o3')
, (',')
WHITE_SPACE (' ')
identifier ('o4')
] (']')
WHITE_SPACE ('\n    ')
} ('}')
; (';')
WHITE_SPACE ('\n\n    ')
LINE_COMMENT ('// This prints the `Order` table content.')
WHITE_SPACE ('\n    ')
identifier ('printTable')
( ('(')
identifier ('queryStmt')
, (',')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"The orderTable: "')
, (',')
WHITE_SPACE (' ')
identifier ('orderTable')
) (')')
; (';')
WHITE_SPACE ('\n\n    ')
LINE_COMMENT ('// Querying for a table always returns a new in-memory table.')
WHITE_SPACE ('\n\n    ')
LINE_COMMENT ('//Queries all the records in a table and returns them as another in-memory table.')
WHITE_SPACE ('\n    ')
table ('table')
< ('<')
identifier ('Person')
> ('>')
WHITE_SPACE (' ')
identifier ('personTableCopy')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
from ('from')
WHITE_SPACE (' ')
identifier ('personTable')
WHITE_SPACE (' ')
select ('select')
WHITE_SPACE (' ')
* ('*')
; (';')
WHITE_SPACE ('\n    ')
identifier ('queryStmt')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"\ntable<Person> personTableCopy = from personTable select *;"')
; (';')
WHITE_SPACE ('\n    ')
identifier ('printTable')
( ('(')
identifier ('queryStmt')
, (',')
QUOTED_STRING_LITERAL ('"personTableCopy: "')
, (',')
WHITE_SPACE (' ')
identifier ('personTableCopy')
) (')')
; (';')
WHITE_SPACE ('\n\n    ')
LINE_COMMENT ('//Queries all the records and returns them in the ascending order of the salary.')
WHITE_SPACE ('\n    ')
table ('table')
< ('<')
identifier ('Person')
> ('>')
WHITE_SPACE (' ')
identifier ('orderedPersonTable')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
from ('from')
WHITE_SPACE (' ')
identifier ('personTable')
WHITE_SPACE (' ')
select ('select')
WHITE_SPACE (' ')
* ('*')
WHITE_SPACE (' ')
order ('order')
WHITE_SPACE (' ')
by ('by')
WHITE_SPACE (' ')
identifier ('salary')
; (';')
WHITE_SPACE ('\n    ')
identifier ('queryStmt')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"\ntable<Person> orderedPersonTable = "')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE ('\n            ')
QUOTED_STRING_LITERAL ('"from personTable select * order by salary;"')
; (';')
WHITE_SPACE ('\n    ')
identifier ('printTable')
( ('(')
identifier ('queryStmt')
, (',')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"orderedPersonTable: "')
, (',')
WHITE_SPACE (' ')
identifier ('orderedPersonTable')
) (')')
; (';')
WHITE_SPACE ('\n\n    ')
LINE_COMMENT ('//Queries all the records in a table that match a specific filter criterion.')
WHITE_SPACE ('\n    ')
table ('table')
< ('<')
identifier ('Person')
> ('>')
WHITE_SPACE (' ')
identifier ('personTableCopyWithFilter')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE ('\n                 ')
from ('from')
WHITE_SPACE (' ')
identifier ('personTable')
WHITE_SPACE (' ')
where ('where')
WHITE_SPACE (' ')
identifier ('name')
WHITE_SPACE (' ')
== ('==')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"jane"')
WHITE_SPACE (' ')
select ('select')
WHITE_SPACE (' ')
* ('*')
; (';')
WHITE_SPACE ('\n    ')
identifier ('queryStmt')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"\ntable<Person> personTableCopyWithFilter = "')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE ('\n            ')
QUOTED_STRING_LITERAL ('"from personTable where name == 'jane' select *;"')
; (';')
WHITE_SPACE ('\n    ')
identifier ('printTable')
( ('(')
identifier ('queryStmt')
, (',')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"personTableCopyWithFilter: "')
, (',')
WHITE_SPACE (' ')
identifier ('personTableCopyWithFilter')
) (')')
; (';')
WHITE_SPACE ('\n\n    ')
LINE_COMMENT ('//Queries only few fields in a table and returns the results as a new in-memory')
WHITE_SPACE ('\n    ')
LINE_COMMENT ('//table constrained by a different type.')
WHITE_SPACE ('\n    ')
table ('table')
< ('<')
identifier ('PersonPublicProfile')
> ('>')
WHITE_SPACE (' ')
identifier ('childTable')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
from ('from')
WHITE_SPACE (' ')
identifier ('personTable')
WHITE_SPACE ('\n                  ')
select ('select')
WHITE_SPACE (' ')
identifier ('name')
WHITE_SPACE (' ')
as ('as')
WHITE_SPACE (' ')
identifier ('knownName')
, (',')
WHITE_SPACE (' ')
identifier ('age')
; (';')
WHITE_SPACE ('\n    ')
identifier ('queryStmt')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"\ntable<PersonPublicProfile > childTable = "')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE ('\n                    ')
QUOTED_STRING_LITERAL ('"from personTable select name as knownName, age;"')
; (';')
WHITE_SPACE ('\n    ')
identifier ('printTable')
( ('(')
identifier ('queryStmt')
, (',')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"childTable: "')
, (',')
WHITE_SPACE (' ')
identifier ('childTable')
) (')')
; (';')
WHITE_SPACE ('\n\n    ')
LINE_COMMENT ('//This applies the `group by` clause to a table and returns a new table with the result.')
WHITE_SPACE ('\n    ')
table ('table')
< ('<')
identifier ('SummedOrder')
> ('>')
WHITE_SPACE (' ')
identifier ('summedOrderTable')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
from ('from')
WHITE_SPACE (' ')
identifier ('orderTable')
WHITE_SPACE ('\n                  ')
select ('select')
WHITE_SPACE (' ')
identifier ('personId')
, (',')
WHITE_SPACE (' ')
identifier ('sum')
( ('(')
identifier ('amount')
) (')')
WHITE_SPACE (' ')
group ('group')
WHITE_SPACE (' ')
by ('by')
WHITE_SPACE (' ')
identifier ('personId')
; (';')
WHITE_SPACE ('\n    ')
identifier ('queryStmt')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"\ntable<SummedOrder> summedOrderTable = "')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE ('\n            ')
QUOTED_STRING_LITERAL ('"from orderTable select personId, sum(amount) group by personId;"')
; (';')
WHITE_SPACE ('\n    ')
identifier ('printTable')
( ('(')
identifier ('queryStmt')
, (',')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"summedOrderTable: "')
, (',')
WHITE_SPACE (' ')
identifier ('summedOrderTable')
) (')')
; (';')
WHITE_SPACE ('\n\n    ')
LINE_COMMENT ('//Joins a table with another table and returns the selected fields in a table')
WHITE_SPACE ('\n    ')
LINE_COMMENT ('//constrained by a different type.')
WHITE_SPACE ('\n    ')
table ('table')
< ('<')
identifier ('OrderDetails')
> ('>')
WHITE_SPACE (' ')
identifier ('orderDetailsTable')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE ('\n                    ')
from ('from')
WHITE_SPACE (' ')
identifier ('personTable')
WHITE_SPACE (' ')
as ('as')
WHITE_SPACE (' ')
identifier ('tempPersonTable')
WHITE_SPACE ('\n                    ')
join ('join')
WHITE_SPACE (' ')
identifier ('orderTable')
WHITE_SPACE (' ')
as ('as')
WHITE_SPACE (' ')
identifier ('tempOrderTable')
WHITE_SPACE ('\n                        ')
on ('on')
WHITE_SPACE (' ')
identifier ('tempPersonTable')
. ('.')
identifier ('id')
WHITE_SPACE (' ')
== ('==')
WHITE_SPACE (' ')
identifier ('tempOrderTable')
. ('.')
identifier ('personId')
WHITE_SPACE ('\n                    ')
select ('select')
WHITE_SPACE (' ')
identifier ('tempOrderTable')
. ('.')
identifier ('orderId')
WHITE_SPACE (' ')
as ('as')
WHITE_SPACE (' ')
identifier ('orderId')
, (',')
WHITE_SPACE ('\n                            ')
identifier ('tempPersonTable')
. ('.')
identifier ('name')
WHITE_SPACE (' ')
as ('as')
WHITE_SPACE (' ')
identifier ('personName')
, (',')
WHITE_SPACE ('\n                            ')
identifier ('tempOrderTable')
. ('.')
identifier ('items')
WHITE_SPACE (' ')
as ('as')
WHITE_SPACE (' ')
identifier ('items')
, (',')
WHITE_SPACE ('\n                            ')
identifier ('tempOrderTable')
. ('.')
identifier ('amount')
WHITE_SPACE (' ')
as ('as')
WHITE_SPACE (' ')
identifier ('amount')
; (';')
WHITE_SPACE ('\n    ')
identifier ('queryStmt')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"\ntable<OrderDetails> orderDetailsTable = "')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE ('\n            ')
QUOTED_STRING_LITERAL ('"from personTable as tempPersonTable\n            join orderTable as tempOrderTable "')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE ('\n                    ')
QUOTED_STRING_LITERAL ('"on tempPersonTable.id == tempOrderTable.personId\n            select tempOrderTable.orderId as orderId, "')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE ('\n                    ')
QUOTED_STRING_LITERAL ('"tempPersonTable.name as personName, "')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE ('\n                    ')
QUOTED_STRING_LITERAL ('"tempOrderTable.items as items, "')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE ('\n                    ')
QUOTED_STRING_LITERAL ('"tempOrderTable.amount as amount;"')
; (';')
WHITE_SPACE ('\n    ')
identifier ('printTable')
( ('(')
identifier ('queryStmt')
, (',')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"orderDetailsTable: "')
, (',')
WHITE_SPACE (' ')
identifier ('orderDetailsTable')
) (')')
; (';')
WHITE_SPACE ('\n\n    ')
LINE_COMMENT ('//Joins a table with another table using the `where` clause and return the selected fields in a')
WHITE_SPACE ('\n    ')
LINE_COMMENT ('// table constrained by a different type.')
WHITE_SPACE ('\n    ')
table ('table')
< ('<')
identifier ('OrderDetails')
> ('>')
WHITE_SPACE (' ')
identifier ('orderDetailsWithFilter')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE ('\n                    ')
from ('from')
WHITE_SPACE (' ')
identifier ('personTable')
WHITE_SPACE ('\n                    ')
where ('where')
WHITE_SPACE (' ')
identifier ('name')
WHITE_SPACE (' ')
!= ('!=')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"jane"')
WHITE_SPACE (' ')
as ('as')
WHITE_SPACE (' ')
identifier ('tempPersonTable')
WHITE_SPACE ('\n                    ')
join ('join')
WHITE_SPACE (' ')
identifier ('orderTable')
WHITE_SPACE (' ')
where ('where')
WHITE_SPACE (' ')
identifier ('personId')
WHITE_SPACE (' ')
!= ('!=')
WHITE_SPACE (' ')
DECIMAL_INTEGER_LITERAL ('3')
WHITE_SPACE (' ')
as ('as')
WHITE_SPACE (' ')
identifier ('tempOrderTable')
WHITE_SPACE ('\n                            ')
on ('on')
WHITE_SPACE (' ')
identifier ('tempPersonTable')
. ('.')
identifier ('id')
WHITE_SPACE (' ')
== ('==')
WHITE_SPACE (' ')
identifier ('tempOrderTable')
. ('.')
identifier ('personId')
WHITE_SPACE ('\n                    ')
select ('select')
WHITE_SPACE (' ')
identifier ('tempOrderTable')
. ('.')
identifier ('orderId')
WHITE_SPACE (' ')
as ('as')
WHITE_SPACE (' ')
identifier ('orderId')
, (',')
WHITE_SPACE ('\n                            ')
identifier ('tempPersonTable')
. ('.')
identifier ('name')
WHITE_SPACE (' ')
as ('as')
WHITE_SPACE (' ')
identifier ('personName')
, (',')
WHITE_SPACE ('\n                            ')
identifier ('tempOrderTable')
. ('.')
identifier ('items')
WHITE_SPACE (' ')
as ('as')
WHITE_SPACE (' ')
identifier ('items')
, (',')
WHITE_SPACE ('\n                            ')
identifier ('tempOrderTable')
. ('.')
identifier ('amount')
WHITE_SPACE (' ')
as ('as')
WHITE_SPACE (' ')
identifier ('amount')
; (';')
WHITE_SPACE ('\n    ')
identifier ('queryStmt')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"\ntable<OrderDetails> orderDetailsWithFilter = "')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE ('\n            ')
QUOTED_STRING_LITERAL ('"from personTable where name != 'jane' as tempPersonTable\n             join orderTable where personId != 3 as tempOrderTable "')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE ('\n                    ')
QUOTED_STRING_LITERAL ('"on tempPersonTable.id == tempOrderTable.personId\n             select tempOrderTable.orderId as orderId, "')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE ('\n                    ')
QUOTED_STRING_LITERAL ('"tempPersonTable.name as personName,"')
WHITE_SPACE (' ')
+ ('+')
WHITE_SPACE ('\n                    ')
QUOTED_STRING_LITERAL ('"tempOrderTable.items as items,\n                    tempOrderTable.amount as amount;"')
; (';')
WHITE_SPACE ('\n    ')
identifier ('printTable')
( ('(')
identifier ('queryStmt')
, (',')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"orderDetailsWithFilter: "')
, (',')
WHITE_SPACE (' ')
identifier ('orderDetailsWithFilter')
) (')')
; (';')
WHITE_SPACE ('\n')
} ('}')
WHITE_SPACE ('\n\n')
function ('function')
WHITE_SPACE (' ')
identifier ('printTable')
( ('(')
string ('string')
WHITE_SPACE (' ')
identifier ('stmt')
, (',')
WHITE_SPACE (' ')
string ('string')
WHITE_SPACE (' ')
identifier ('tableName')
, (',')
WHITE_SPACE (' ')
table ('table')
< ('<')
anydata ('anydata')
> ('>')
WHITE_SPACE (' ')
identifier ('returnedTable')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n    ')
var ('var')
WHITE_SPACE (' ')
identifier ('retData')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
json ('json')
. ('.')
identifier ('convert')
( ('(')
identifier ('returnedTable')
) (')')
; (';')
WHITE_SPACE ('\n    ')
identifier ('io')
: (':')
identifier ('println')
( ('(')
identifier ('stmt')
) (')')
; (';')
WHITE_SPACE ('\n    ')
identifier ('io')
: (':')
identifier ('print')
( ('(')
identifier ('tableName')
) (')')
; (';')
WHITE_SPACE ('\n    ')
if ('if')
WHITE_SPACE (' ')
( ('(')
identifier ('retData')
WHITE_SPACE (' ')
is ('is')
WHITE_SPACE (' ')
json ('json')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
identifier ('io')
: (':')
identifier ('println')
( ('(')
identifier ('io')
: (':')
identifier ('sprintf')
( ('(')
QUOTED_STRING_LITERAL ('"%s"')
, (',')
WHITE_SPACE (' ')
identifier ('retData')
) (')')
) (')')
; (';')
WHITE_SPACE ('\n    ')
} ('}')
WHITE_SPACE (' ')
else ('else')
WHITE_SPACE (' ')
if ('if')
WHITE_SPACE (' ')
( ('(')
identifier ('retData')
WHITE_SPACE (' ')
is ('is')
WHITE_SPACE (' ')
error ('error')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
identifier ('io')
: (':')
identifier ('println')
( ('(')
QUOTED_STRING_LITERAL ('"Error in table to json conversion"')
) (')')
; (';')
WHITE_SPACE ('\n    ')
} ('}')
WHITE_SPACE ('\n')
} ('}')
