import ('import')
WHITE_SPACE (' ')
identifier ('ballerina')
/ ('/')
identifier ('io')
; (';')
WHITE_SPACE ('\n\n')
LINE_COMMENT ('// Defines a `channel` that accepts `xml` messages.')
WHITE_SPACE ('\n')
channel ('channel')
< ('<')
xml ('xml')
> ('>')
WHITE_SPACE (' ')
identifier ('xmlChn')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
new ('new')
; (';')
WHITE_SPACE ('\n\n')
PUBLIC ('public')
WHITE_SPACE (' ')
function ('function')
WHITE_SPACE (' ')
identifier ('main')
( ('(')
string ('string')
... ('...')
WHITE_SPACE (' ')
identifier ('args')
) (')')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n\n    ')
worker ('worker')
WHITE_SPACE (' ')
identifier ('w1')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
map ('map')
< ('<')
string ('string')
> ('>')
WHITE_SPACE (' ')
identifier ('keyMap')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE (' ')
identifier ('myKey')
: (':')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"abc123"')
WHITE_SPACE (' ')
} ('}')
; (';')
WHITE_SPACE ('\n        ')
identifier ('io')
: (':')
identifier ('println')
( ('(')
QUOTED_STRING_LITERAL ('"w1 Waiting for a message..."')
) (')')
; (';')
WHITE_SPACE ('\n        ')
xml ('xml')
WHITE_SPACE (' ')
identifier ('message')
; (';')
WHITE_SPACE ('\n        ')
LINE_COMMENT ('// Waiting to receive a message with key from xmlChn channel.')
WHITE_SPACE ('\n        ')
identifier ('message')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
<- ('<-')
WHITE_SPACE (' ')
identifier ('xmlChn')
, (',')
WHITE_SPACE (' ')
identifier ('keyMap')
; (';')
WHITE_SPACE ('\n        ')
identifier ('io')
: (':')
identifier ('println')
( ('(')
QUOTED_STRING_LITERAL ('"w1 Received message: "')
, (',')
WHITE_SPACE (' ')
identifier ('message')
) (')')
; (';')
WHITE_SPACE ('\n        ')
identifier ('io')
: (':')
identifier ('println')
( ('(')
QUOTED_STRING_LITERAL ('"w1 Waiting for a null key message..."')
) (')')
; (';')
WHITE_SPACE ('\n        ')
LINE_COMMENT ('// Wait to receive a message without a key from the xmlChn channel.')
WHITE_SPACE ('\n        ')
identifier ('message')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
<- ('<-')
WHITE_SPACE (' ')
identifier ('xmlChn')
; (';')
WHITE_SPACE ('\n        ')
identifier ('io')
: (':')
identifier ('println')
( ('(')
QUOTED_STRING_LITERAL ('"w1 Received message: "')
, (',')
WHITE_SPACE (' ')
identifier ('message')
) (')')
; (';')
WHITE_SPACE ('\n    ')
} ('}')
WHITE_SPACE ('\n\n    ')
worker ('worker')
WHITE_SPACE (' ')
identifier ('w2')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
map ('map')
< ('<')
string ('string')
> ('>')
WHITE_SPACE (' ')
identifier ('keyMap')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE (' ')
identifier ('myKey')
: (':')
WHITE_SPACE (' ')
QUOTED_STRING_LITERAL ('"abc123"')
WHITE_SPACE (' ')
} ('}')
; (';')
WHITE_SPACE ('\n        ')
xml ('xml')
WHITE_SPACE (' ')
identifier ('msg')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
XML_LITERAL_START ('xml `')
XML_TAG_OPEN ('<')
XML_QNAME ('msg')
XML_TAG_CLOSE ('>')
XML_TAG_OPEN ('<')
XML_QNAME ('name')
XML_TAG_CLOSE ('>')
XML_TEXT_SEQUENCE ('ballerina')
XML_TAG_OPEN_SLASH ('</')
XML_QNAME ('name')
XML_TAG_CLOSE ('>')
XML_TAG_OPEN ('<')
XML_QNAME ('worker')
XML_TAG_CLOSE ('>')
XML_TEXT_SEQUENCE ('w2')
XML_TAG_OPEN_SLASH ('</')
XML_QNAME ('worker')
XML_TAG_CLOSE ('>')
XML_TAG_OPEN_SLASH ('</')
XML_QNAME ('msg')
XML_TAG_CLOSE ('>')
XML_LITERAL_END ('`')
; (';')
WHITE_SPACE ('\n        ')
LINE_COMMENT ('// Send a message with a key to xmlChn.')
WHITE_SPACE ('\n        ')
identifier ('msg')
WHITE_SPACE (' ')
-> ('->')
WHITE_SPACE (' ')
identifier ('xmlChn')
, (',')
WHITE_SPACE (' ')
identifier ('keyMap')
; (';')
WHITE_SPACE ('\n        ')
identifier ('io')
: (':')
identifier ('println')
( ('(')
QUOTED_STRING_LITERAL ('"Sent message from w2"')
) (')')
; (';')
WHITE_SPACE ('\n    ')
} ('}')
WHITE_SPACE ('\n\n    ')
worker ('worker')
WHITE_SPACE (' ')
identifier ('w3')
WHITE_SPACE (' ')
{ ('{')
WHITE_SPACE ('\n        ')
xml ('xml')
WHITE_SPACE (' ')
identifier ('msg')
WHITE_SPACE (' ')
= ('=')
WHITE_SPACE (' ')
XML_LITERAL_START ('xml `')
XML_TAG_OPEN ('<')
XML_QNAME ('msg')
XML_TAG_CLOSE ('>')
XML_TAG_OPEN ('<')
XML_QNAME ('name')
XML_TAG_CLOSE ('>')
XML_TEXT_SEQUENCE ('ballerina')
XML_TAG_OPEN_SLASH ('</')
XML_QNAME ('name')
XML_TAG_CLOSE ('>')
XML_TAG_OPEN ('<')
XML_QNAME ('worker')
XML_TAG_CLOSE ('>')
XML_TEXT_SEQUENCE ('w3')
XML_TAG_OPEN_SLASH ('</')
XML_QNAME ('worker')
XML_TAG_CLOSE ('>')
XML_TAG_OPEN_SLASH ('</')
XML_QNAME ('msg')
XML_TAG_CLOSE ('>')
XML_LITERAL_END ('`')
; (';')
WHITE_SPACE ('\n        ')
LINE_COMMENT ('// Send a message without a key to xmlChn.')
WHITE_SPACE ('\n        ')
identifier ('msg')
WHITE_SPACE (' ')
-> ('->')
WHITE_SPACE (' ')
identifier ('xmlChn')
; (';')
WHITE_SPACE ('\n        ')
identifier ('io')
: (':')
identifier ('println')
( ('(')
QUOTED_STRING_LITERAL ('"Sent message from w3"')
) (')')
; (';')
WHITE_SPACE ('\n    ')
} ('}')
WHITE_SPACE ('\n\n    ')
wait ('wait')
WHITE_SPACE (' ')
identifier ('w1')
; (';')
WHITE_SPACE ('\n')
} ('}')
